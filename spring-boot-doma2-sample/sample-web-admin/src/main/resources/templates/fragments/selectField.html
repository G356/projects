<html xmlns:th="http://www.thymeleaf.org">
<body>
<form>
    <th:block th:fragment="select (label, name, items, k, v)">
        <div class="form-group" th:class="${'form-group' + (valid ? '' : ' has-error')}"
             th:with="valid=${!#fields.hasErrors(name)}">
            <label class="col-sm-2 control-label" th:text="${label}">Label</label>
            <div class="col-sm-3">
                <select class="form-control" th:field="*{__${name}__}">
                    <option th:text="${Const['PulldownOption']}"
                            value="">pick one
                    </option>
                    <option th:each="item : ${items}"
                            th:text="${item['__${v}__']}"
                            th:value="${val}"
                            th:with="val=${(item['__${k}__'] instanceof T(com.sample.domain.dto.common.ID)) ? item['__${k}__'].value : item['__${k}__']}">dog
                    </option>
                </select>
            </div>
        </div>
    </th:block>
</form>
</body>
</html>
